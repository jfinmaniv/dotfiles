# Options
auto_view text/html # view html emails in pager
alternative_order text/plain text/html # view text first if available
attachments +A */.* 
attachments -A */ics

color hdrdefault white       default
color index      blue        default ~U  # unread messages
color index      green       default ~Q  # replied messages
color index      red         default ~D  # deleted messages
color indicator  black       brightwhite # indicator bar
color quoted     white       default
color status     white       brightwhite     # status bar

folder-hook ~/.mail/csumb 'source ~/.mutt/csumb' 
folder-hook ~/.mail/gmail 'source ~/.mutt/gmail' 
folder-hook ~/.mail/icloud 'source ~/.mutt/icloud' 

save-hook . /home/jfin/.mail/saved

set abort_noattach=ask-yes # ask if no attachments
# set abort_noattach_regex='\\<attach(ed|ments?)\\>'
set abort_nosubject=no # abort messages with no subject?
set abort_unmodified=no # just do it
set alias_file='~/.mutt/aliases' # where I keep my aliases
set confirmcreate=no # just create the mailbox
set confirmappend=no # just append saved messages
set delete=yes # purge deleted messages without asking
set edit_headers=yes # let me edit the message header when composing
set editor='vim +"set tw=0" +"set spell"' # editor settings
set fast_reply=yes # skip initial prompts when replying
set fcc_attach=no # keep attachments in copies of sent messages?
set header_cache=~/.cache/mutt # where to keep headers cache
set hostname=foo
set include=yes # always include messages when replying
# month, day, from, to, cc, attachments, subject
set index_format='%3C %[%b %e %Y %H:%M] %?zt?%zt&%T? %-20.20L  %?X?@& ? %?M?(%M) ?%s' 
set pager_index_lines=10
set recall=no # prompt to recall postponed messages?
set realname='John Inman' # my real name
set sort=threads # primary sorting method
set sort_aux=last-date-received # how to sort subthreads
set to_chars=' !    '
set trash='~/.mail/trash'
set use_envelope_from=yes # populate envelope-from from From: header
set use_from=yes # use from address
set wait_key=no # don't have to press key after running external command

ignore * # ignore all headers
unignore from date subject to cc bcc # don't ignore these headers

source ~/.mutt/icloud # source personal account
source ~/.mutt/aliases # source alias file

bind browser G last-entry
bind browser g first-entry
bind browser h goto-parent
bind browser l select-entry

macro compose a '<attach-file>?'

bind index G last-entry
bind index N search-opposite
bind index P recall-message
bind index R group-reply
bind index g first-entry
bind index l display-message
macro index 1 '<change-folder>~/.mail/icloud/INBOX<enter>'
macro index 2 '<change-folder>~/.mail/csumb/INBOX<enter>'
macro index 3 '<change-folder>~/.mail/gmail/INBOX<enter>'
macro index h '<change-folder>?<toggle-mailboxes>' 'show incoming mailboxes list'
macro index I '<shell-escape>mbsync -a<enter>' 'sync all accounts'

bind pager G bottom
bind pager L group-reply
bind pager R group-reply
bind pager g top 
bind pager h exit
bind pager j next-line
bind pager k previous-line
bind pager l reply
macro pager u "\
:set my_tmp_pipe_decode=\$pipe_decode\n\
:set pipe_decode\n\
|urlview\n\
:set pipe_decode=\$my_tmp_pipe_decode\n\
:unset my_tmp_pipe_decode\n" \
'call urlview to extract URLs out of a message'

